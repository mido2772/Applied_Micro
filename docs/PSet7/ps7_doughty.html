<head>
  <link rel="stylesheet" type="text/css" href="stmarkdown.css">
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML">
</script>
<script type="text/javascript">
document.addEventListener('DOMContentLoaded', function() {
    htmlTableOfContents();
} );                        

function htmlTableOfContents( documentRef ) {
    var documentRef = documentRef || document;
    var toc = documentRef.getElementById("toc");
//  Use headings inside <article> only:
//  var headings = [].slice.call(documentRef.body.querySelectorAll('article h1, article h2, article h3, article h4, article h5, article h6'));
    var headings = [].slice.call(documentRef.body.querySelectorAll('h1, h2, h3, h4, h5, h6'));
    headings.forEach(function (heading, index) {
        var ref = "toc" + index;
        if ( heading.hasAttribute( "id" ) ) 
            ref = heading.getAttribute( "id" );
        else
            heading.setAttribute( "id", ref );

        var link = documentRef.createElement( "a" );
        link.setAttribute( "href", "#"+ ref );
        link.textContent = heading.textContent;

        var div = documentRef.createElement( "div" );
        div.setAttribute( "class", heading.tagName.toLowerCase() );
        div.appendChild( link );
        toc.appendChild( div );
    });
}


try {
    module.exports = htmlTableOfContents;
} catch (e) {
    // module.exports is not defined
}
</script>
</head>  
<h1><a href="#pset-7" id="pset-7">PSet 7</a></h1>
<p>Michelle Doughty<br />
ECON 8848</p>
<p>Began: 18 Mar 2021<br />
Updated:</p>
<p>Collaborators: Hannah Denker</p>
<h2><a href="#preparing-for-analysis" id="preparing-for-analysis">Preparing for analysis</a></h2>
<p><strong>Sample selection and reshaping</strong></p>
<pre><code>. use &quot;${datapath}psidextract.dta&quot;, clear

. codebook, compact

Variable        Obs Unique      Mean  Min     Max  Label
--------------------------------------------------------------------------------------------
id            25115  25115     12558    1   25115  
age1997        6747     81  44.66089   17     999  AGE OF HEAD
marst1997      6747      6    1.9668    1       9  HEAD MARITAL STATUS
work1997       6747      4  1.242775    0       9  B3 WORK FOR MONEY?(HD-E)
union1997      6747      5  2.785683    0       9  B7 JOB NOW UNION? (H-E)
salary1997     6747    529  20032.47    0  999999  B13 SALARY AMOUNT
wage1997       6747    651  21.22458    0     999  B16 HOURLY REGULAR RATE
tenure1997     6747     47  5.475915    0      99  B23 YRS PRES EMP (H-E)
age1999        6997     83  45.18708   17     999  AGE OF HEAD
marst1999      6997      6  1.988995    1       8  HEAD MARITAL STATUS
work1999       6997      4   1.17436    0       9  B3 WORK FOR MONEY?(HD-E)
union1999      6997      5  2.893812    0       9  B7 JOB NOW UNION? (H-E)
salary1999     6997    516  21876.68    0  999999  B13 SALARY AMOUNT
wage1999       6997    691   21.3071    0     999  B16 HOURLY REGULAR RATE
tenure1999     6997     48  5.630699    0      99  B23 YRS PRES EMP (H-E)
weight1999     6997    216  194.0643    0     999  H22 WEIGHT
heightft1999   6997      6  5.275832    0       9  H23 HEIGHT-FEET
heightin1999   6997     14  6.455338    0      99  H23 HEIGHT-INCHES
age2001        7406     83   45.3057   17     999  AGE OF HEAD
marst2001      7406      5  1.996084    1       5  HEAD MARITAL STATUS
work2001       7406      3  1.202944    0       5  B3 WORK FOR MONEY?(HD-E)
union2001      7406      5  2.863894    0       9  B7 JOB NOW UNION? (H-E)
salary2001     7406    542  23768.59    0  999999  B13 SALARY AMOUNT
wage2001       7406    696  22.13701    0     999  B16 HOURLY REGULAR RATE
tenure2001     7406     47  5.781664    0      99  B23 YRS PRES EMP (H-E)
weight2001     7822    229  202.5266    0     999  H22 WEIGHT
heightft2001   7822      7  5.290846    0       9  H23 HEIGHT-FEET
heightin2001   7822     14  6.214012    0      99  H23 HEIGHT-INCHES
education      7822     19  18.20391    0      99  COMPLETED ED-HD
--------------------------------------------------------------------------------------------

. keep if age1997 &lt;= 55 &amp; age1997 &gt;= 18
(19,828 observations deleted)

. glob iyvars &quot;age marst work union salary wage tenure weight heightft heightin&quot;

. foreach var in $iyvars {
  2.         loc `var'_lab : variable label `var'2001
  3. }

. reshape long $iyvars, i(id) j(year)
(note: j = 1997 1999 2001)
(note: weight1997 not found)
(note: heightft1997 not found)
(note: heightin1997 not found)

Data                               wide   -&gt;   long
-----------------------------------------------------------------------------
Number of obs.                     5287   -&gt;   15861
Number of variables                  29   -&gt;      13
j variable (3 values)                     -&gt;   year
xij variables:
                age1997 age1999 age2001   -&gt;   age
          marst1997 marst1999 marst2001   -&gt;   marst
             work1997 work1999 work2001   -&gt;   work
          union1997 union1999 union2001   -&gt;   union
       salary1997 salary1999 salary2001   -&gt;   salary
             wage1997 wage1999 wage2001   -&gt;   wage
       tenure1997 tenure1999 tenure2001   -&gt;   tenure
       weight1997 weight1999 weight2001   -&gt;   weight
 heightft1997 heightft1999 heightft2001   -&gt;   heightft
 heightin1997 heightin1999 heightin2001   -&gt;   heightin
-----------------------------------------------------------------------------

. foreach var in $iyvars {
  2.         label variable `var' &quot;``var'_lab'&quot;
  3. }

</code></pre>
<p>The data begin wide by year, covering 1997, 1999, and 2001.</p>
<p><strong>Cleaning and recoding</strong></p>
<pre><code>. gen married = marst==1 if marst&lt;.
(1,424 missing values generated)

. 
. gen hourwage = . 
(15,861 missing values generated)

. replace hourwage = wage if wage &gt; 1 &amp; wage &lt; 100
(5,975 real changes made)

. replace hourwage = salary/2000 if (salary/2000) &gt; 1 &amp; (salary/2000) &lt; 100
(3,814 real changes made)

. gen logwage = log(hourwage)
(6,072 missing values generated)

. 
. replace education = . if education==99
(522 real changes made, 522 to missing)

. 
. recode union (0=.) (8=.) (9=.) (1=1) (5=0)
(union: 12185 changes made)

. 
. gen heightinches = heightft*12 + heightin
(6,930 missing values generated)

. replace heightinches = . if heightinches &gt; 84
(71 real changes made, 71 to missing)

. 
. replace weight = . if weight&gt;900
(113 real changes made, 113 to missing)

. 
. foreach var in logwage married education age union tenure {
  2.         drop if `var' &gt;= .
  3. }
(6,072 observations deleted)
(0 observations deleted)
(1,571 observations deleted)
(0 observations deleted)
(400 observations deleted)
(0 observations deleted)

. 
. xtset id year, delta(2)
       panel variable:  id (unbalanced)
        time variable:  year, 1997 to 2001, but with gaps
                delta:  2 units

. 
</code></pre>
<h2><a href="#pooled-ols-regressions" id="pooled-ols-regressions">Pooled OLS Regressions</a></h2>
<pre><code>. reg logwage married i.year, vce(cluster id)

Linear regression                               Number of obs     =      7,818
                                                F(3, 3272)        =     179.02
                                                Prob &gt; F          =     0.0000
                                                R-squared         =     0.0778
                                                Root MSE          =     .67408

                                 (Std. Err. adjusted for 3,273 clusters in id)
------------------------------------------------------------------------------
             |               Robust
     logwage |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     married |   .3569304   .0206062    17.32   0.000      .316528    .3973328
             |
        year |
       1999  |   .0972047   .0125084     7.77   0.000     .0726797    .1217298
       2001  |   .2140451   .0141838    15.09   0.000     .1862351    .2418552
             |
       _cons |   2.290706   .0164014   139.67   0.000     2.258548    2.322864
------------------------------------------------------------------------------

</code></pre>
<p>I did not adjust the wage variables for inflation, but the year dummies ensure that I am only comparing within a given year&ndash;I am eliminating the constant between-year variation, which includes inflation.</p>
<p>According to this regression, married people have an average hourly wage 0.429% higher than unmarried people in the sample in the same year.</p>
<pre><code>. reg logwage married education age union tenure i.year, vce(cluster id) 

Linear regression                               Number of obs     =      7,818
                                                F(7, 3272)        =     216.18
                                                Prob &gt; F          =     0.0000
                                                R-squared         =     0.2444
                                                Root MSE          =     .61031

                                 (Std. Err. adjusted for 3,273 clusters in id)
------------------------------------------------------------------------------
             |               Robust
     logwage |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     married |   .2677913   .0185079    14.47   0.000     .2315032    .3040795
   education |   .1034609   .0041574    24.89   0.000     .0953097    .1116122
         age |   .0057943   .0011454     5.06   0.000     .0035485      .00804
       union |    .073405   .0210289     3.49   0.000     .0321739    .1146361
      tenure |   .0090104   .0012511     7.20   0.000     .0065573    .0114634
             |
        year |
       1999  |    .082144   .0122536     6.70   0.000     .0581184    .1061696
       2001  |   .1812824   .0143291    12.65   0.000     .1531875    .2093773
             |
       _cons |   .6657521   .0651715    10.22   0.000      .537971    .7935333
------------------------------------------------------------------------------

</code></pre>
<p>Adding additional controls to the regression slightly attenuates the relationship between marital status and hourly wage, though married people still earn significantly more than unmarried people even after controlling for education status, age, union status, tenure, and year.</p>
<pre><code>. reg logwage married education age union tenure heightinches weight i.year, vce(cluster id)
&gt;  

Linear regression                               Number of obs     =      5,098
                                                F(8, 2998)        =     142.65
                                                Prob &gt; F          =     0.0000
                                                R-squared         =     0.2382
                                                Root MSE          =      .6193

                                 (Std. Err. adjusted for 2,999 clusters in id)
------------------------------------------------------------------------------
             |               Robust
     logwage |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     married |   .2166674   .0224323     9.66   0.000     .1726831    .2606517
   education |   .1029582   .0047872    21.51   0.000     .0935717    .1123447
         age |   .0048013   .0012974     3.70   0.000     .0022574    .0073451
       union |    .046262     .02326     1.99   0.047     .0006547    .0918692
      tenure |   .0083455   .0013321     6.26   0.000     .0057336    .0109574
heightinches |    .019896   .0032612     6.10   0.000     .0135017    .0262904
      weight |  -.0004482   .0002955    -1.52   0.129    -.0010277    .0001313
             |
        year |
       2001  |   .1061128   .0133137     7.97   0.000     .0800079    .1322178
             |
       _cons |  -.4593894   .2122812    -2.16   0.031     -.875621   -.0431579
------------------------------------------------------------------------------

</code></pre>
<p>While many coefficients in this regression look similar, the number of observations has significantly decreased and the year dummies now only includes 2001 (with 1999 as the ommitted category), because the weight and height variables are entirely misisng in 1997.</p>
<p>&ldquo;Why might omitting these last two variables cause the CIA for this regression model to fail. Be specific&rdquo;</p>
<h2><a href="#fixed-effects-regression" id="fixed-effects-regression">Fixed effects regression</a></h2>
<p><strong>Using xtreg</strong></p>
<pre><code>. 
</code></pre>
<pre><code>. 
</code></pre>
